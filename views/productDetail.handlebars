<div class="container my-4">
  <div class="card shadow">
    <div class="card-body">
      <h1 class="card-title">{{product.title}}</h1>
      <p class="card-text">{{product.description}}</p>
      <ul class="list-group list-group-flush mb-3">
        <li class="list-group-item"><b>Precio:</b> ${{product.price}}</li>
        <li class="list-group-item"><b>Categoría:</b> {{product.category}}</li>
        <li class="list-group-item"><b>Stock:</b> {{product.stock}}</li>
      </ul>
      <button class="btn btn-primary w-100" onclick="addToCart('{{product._id}}')">
        Agregar al carrito
      </button>
    </div>
  </div>
</div>

<script>
  async function addToCart(productId) {
    const cartId = localStorage.getItem('cartId') || 'default-cart-id'; // Cambia esto según tu lógica
    try {
      const response = await fetch(`/api/carts/${cartId}/products/${productId}`, {
        method: 'POST',
      });

      if (response.ok) {
        Swal.fire({
          icon: 'success',
          title: 'Producto agregado',
          text: 'El producto se agregó al carrito exitosamente',
        });
      } else {
        const error = await response.json();
        Swal.fire({
          icon: 'error',
          title: 'Error',
          text: error.message,
        });
      }
    } catch (error) {
      Swal.fire({
        icon: 'error',
        title: 'Error',
        text: 'No se pudo agregar el producto al carrito',
      });
    }
  }
</script>